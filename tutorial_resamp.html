<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.20"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>ISCE: Image Resampling Tutorial</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    extensions: ["tex2jax.js"],
    jax: ["input/TeX","output/HTML-CSS"],
});
</script>
<script type="text/javascript" async="async" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">ISCE
   &#160;<span id="projectnumber">3.0</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.20 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title">Image Resampling Tutorial </div>  </div>
</div><!--header-->
<div class="contents">
<div class="toc"><h3>Table of Contents</h3>
<ul><li class="level1"><a href="#resampintro">Introduction</a></li>
<li class="level1"><a href="#resampmain">Example 1: SLC resampling</a></li>
<li class="level1"><a href="#resampdopp">Example 2: SLC resampling with carrier phase and flattening</a></li>
</ul>
</div>
<div class="textblock"><h1><a class="anchor" id="resampintro"></a>
Introduction</h1>
<p>One of the key operations for SLC co-registration is resampling SLC images from one geometry to another. Resampling is the process of moving pixels from one place in an image to another in a new image while accounting for fractional pixel indices via interpolation. Currently, we represent the transformation with a pixel-by-pixel map of "range" offsets (i.e., offsets in the horizontal direction) and "azimuth" offsets (i.e., offsets in the vertical direction):</p>
<p class="formulaDsp">
\[ I^\prime\left(x, y\right) = I\left(x, y, \Delta x, \Delta y\right) \]
</p>
<p>where \(I^\prime()\) represents the resampled image, \(I()\) represents the original image, \(x\) and \(y\) are the image coordinates in the output geometry, and \(\Delta x\) and \(\Delta y\) are the offsets between the input and output geometries. For SLC co-registration, in addition to resampling of the complex pixel data, the user may also need to account for non-zero carrier phases in the azimuth direction (e.g., for native Doppler images) and flattening of the complex phase to account for differences in center frequency between the image and a master image. The <a class="el" href="classisce3_1_1image_1_1ResampSlc.html">isce3::image::ResampSlc</a> class contains all relevant operations for SLC co-registration.</p>
<h1><a class="anchor" id="resampmain"></a>
Example 1: SLC resampling</h1>
<p>For the basic task of image resampling without carrier phase or flattening considerations, let's look at the following example. Here, we have a crop of an Envisat SLC, azimuth offsets that represent a contraction of the image in the vertical dimension, and range offsets that represent a shearing in the horizontal dimension.</p>
<div class="image">
<img src="resamp_demo.png" alt=""/>
</div>
<p>The following is example code to perform the resampling.</p>
<div class="fragment"><div class="line"><span class="preprocessor">#include &lt;isce3/image/ResampSlc.h&gt;</span></div>
<div class="line"> </div>
<div class="line"><span class="keywordtype">int</span> main() {</div>
<div class="line"> </div>
<div class="line">    <span class="comment">// Instantiate a ResampSlc object</span></div>
<div class="line">    <a class="code" href="classisce3_1_1image_1_1ResampSlc.html">isce3::image::ResampSlc</a> resamp;</div>
<div class="line"> </div>
<div class="line">    <span class="comment">// Open rasters for input files</span></div>
<div class="line">    <a class="code" href="classisce3_1_1io_1_1Raster.html">isce3::io::Raster</a> inputSlc(<span class="stringliteral">&quot;input.slc&quot;</span>);</div>
<div class="line">    <a class="code" href="classisce3_1_1io_1_1Raster.html">isce3::io::Raster</a> rgOff(<span class="stringliteral">&quot;range.off&quot;</span>);</div>
<div class="line">    <a class="code" href="classisce3_1_1io_1_1Raster.html">isce3::io::Raster</a> azOff(<span class="stringliteral">&quot;azimuth.off&quot;</span>);</div>
<div class="line"> </div>
<div class="line">    <span class="comment">// Create raster for output resampled SLC</span></div>
<div class="line">    <a class="code" href="classisce3_1_1io_1_1Raster.html">isce3::io::Raster</a> outputSlc(<span class="stringliteral">&quot;output.slc&quot;</span>, rgOff.width(), rgOff.length(), 1,</div>
<div class="line">                               GDT_CFloat32, <span class="stringliteral">&quot;ISCE&quot;</span>);</div>
<div class="line"> </div>
<div class="line">    <span class="comment">// Re-run resamp</span></div>
<div class="line">    resamp.resamp(inputSlc, outputSlc, rgOff, azOff, 1);</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">return</span> 0;</div>
<div class="line">}</div>
</div><!-- fragment --><p>First, we created <a class="el" href="classisce3_1_1io_1_1Raster.html" title="Data structure meant to handle Raster I/O operations.">isce3::io::Raster</a> objects for all input rasters: the input SLC image, the pixel-by-pixel range offsets, and the pixel-by-pixel azimuth offsets. We then created an output SLC image with the output geometry determined by the either the range or azimuth offset raster. These objects are then passed to a default <a class="el" href="classisce3_1_1image_1_1ResampSlc.html">isce3::image::ResampSlc</a> instance to perform the resampling. After resampling, we obtain the following image:</p>
<div class="image">
<img src="resamp_demo_result.png" alt=""/>
</div>
<h1><a class="anchor" id="resampdopp"></a>
Example 2: SLC resampling with carrier phase and flattening</h1>
<p>If the user wishes to account for SLCs with native Doppler frequencies in the azimuth direction and flattening with respect to a master SLC, the following code can be used.</p>
<div class="fragment"><div class="line"><span class="comment">// isce3::core</span></div>
<div class="line"><span class="preprocessor">#include &lt;isce3/core/Poly2d.h&gt;</span></div>
<div class="line"><span class="comment">// isce3::product</span></div>
<div class="line"><span class="preprocessor">#include &lt;isce3/product/ImageMode.h&gt;</span></div>
<div class="line"><span class="comment">// isce3::image</span></div>
<div class="line"><span class="preprocessor">#include &lt;isce3/image/ResampSlc.h&gt;</span></div>
<div class="line"> </div>
<div class="line"><span class="keywordtype">int</span> main() {</div>
<div class="line"> </div>
<div class="line">    <span class="comment">// Create polynomial for native Doppler</span></div>
<div class="line">    <span class="comment">// Note: 0th order in azimuth, 2nd order in range</span></div>
<div class="line">    <a class="code" href="classisce3_1_1core_1_1Poly2d.html">isce3::core::Poly2d</a> doppler(2, 0, 0.0, 0.0, 1.0, 1.0);</div>
<div class="line">    doppler.coeffs = {301.35306906319204, -0.04633312447837377, 2.044436266418998e-06};</div>
<div class="line"> </div>
<div class="line">    <span class="comment">// Create an ImageMode for the input image using Envisat parameters</span></div>
<div class="line">    isce3::product::ImageMode mode;</div>
<div class="line">    <span class="comment">// Set relevant parameters</span></div>
<div class="line">    mode.wavelength(0.056);</div>
<div class="line">    mode.startingRange(826988.69);</div>
<div class="line">    mode.rangePixelSpacing(7.80);</div>
<div class="line">    mode.prf(1652.416);</div>
<div class="line"> </div>
<div class="line">    <span class="comment">// Create an ImageMode for the reference master image</span></div>
<div class="line">    isce3::product::ImageMode modeRef;</div>
<div class="line">    <span class="comment">// Set relevant parameters for reference</span></div>
<div class="line">    modeRef.wavelength(0.057);</div>
<div class="line">    modeRef.startingRange(826991.0);</div>
<div class="line">    modeRef.rangePixelSpacing(7.80);</div>
<div class="line">    modeRef.prf(1652.416);</div>
<div class="line"> </div>
<div class="line">    <span class="comment">// Instantiate a ResampSlc object</span></div>
<div class="line">    <a class="code" href="classisce3_1_1image_1_1ResampSlc.html">isce3::image::ResampSlc</a> resamp(doppler, mode);</div>
<div class="line">    <span class="comment">// Feed it a reference mode</span></div>
<div class="line">    resamp.refImageMode(modeRef);</div>
<div class="line"> </div>
<div class="line">    <span class="comment">// Open rasters for input files</span></div>
<div class="line">    <a class="code" href="classisce3_1_1io_1_1Raster.html">isce3::io::Raster</a> inputSlc(<span class="stringliteral">&quot;input.slc&quot;</span>);</div>
<div class="line">    <a class="code" href="classisce3_1_1io_1_1Raster.html">isce3::io::Raster</a> rgOff(<span class="stringliteral">&quot;range.off&quot;</span>);</div>
<div class="line">    <a class="code" href="classisce3_1_1io_1_1Raster.html">isce3::io::Raster</a> azOff(<span class="stringliteral">&quot;azimuth.off&quot;</span>);</div>
<div class="line"> </div>
<div class="line">    <span class="comment">// Create raster for output resampled SLC</span></div>
<div class="line">    <a class="code" href="classisce3_1_1io_1_1Raster.html">isce3::io::Raster</a> outputSlc(<span class="stringliteral">&quot;output.slc&quot;</span>, rgOff.width(), rgOff.length(), 1,</div>
<div class="line">                               GDT_CFloat32, <span class="stringliteral">&quot;ISCE&quot;</span>);</div>
<div class="line"> </div>
<div class="line">    <span class="comment">// Re-run resamp</span></div>
<div class="line">    resamp.resamp(inputSlc, outputSlc, rgOff, azOff, 1);</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">return</span> 0;</div>
<div class="line">}</div>
</div><!-- fragment --> </div></div><!-- contents -->
</div><!-- PageDoc -->
<div class="ttc" id="aclassisce3_1_1io_1_1Raster_html"><div class="ttname"><a href="classisce3_1_1io_1_1Raster.html">isce3::io::Raster</a></div><div class="ttdoc">Data structure meant to handle Raster I/O operations.</div><div class="ttdef"><b>Definition:</b> Raster.h:34</div></div>
<div class="ttc" id="aclassisce3_1_1image_1_1ResampSlc_html"><div class="ttname"><a href="classisce3_1_1image_1_1ResampSlc.html">isce3::image::ResampSlc</a></div><div class="ttdef"><b>Definition:</b> ResampSlc.h:31</div></div>
<div class="ttc" id="aclassisce3_1_1core_1_1Poly2d_html"><div class="ttname"><a href="classisce3_1_1core_1_1Poly2d.html">isce3::core::Poly2d</a></div><div class="ttdoc">Data structure for representing 1D polynomials.</div><div class="ttdef"><b>Definition:</b> Poly2d.h:25</div></div>
<hr>
Generated for ISCE3.0 by
<a href="http://www.doxygen.org/index.html"><img src="doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.8.20.
</body>
</html>
